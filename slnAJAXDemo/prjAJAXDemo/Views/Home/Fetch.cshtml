
@{
    ViewData["Title"] = "Fetch";
}

<h1>Fetch</h1>
<h3 id="div1"></h3>
<img id="img1" class="w-25"/>
<ul id="myli"/>
@section Scripts{

<script>
        //console.log(fetch('@Url.Content("/api/index")'))

        //fetch('@Url.Content("/api/index")')
        //.then(response=>{
        //console.log(response)
        //})
        const div = document.querySelector("#div1")
       
        const img1 = document.querySelector("#img1")


        fetch('@Url.Content("/api/Index")')
            .then(response => response.text()) //利用箭頭函式可以不用寫return
            .then(data => {
                div.innerHTML = data
            })

        //fetch('@Url.Content("/api/Cities")')
        //    .then(response => response.json()) 
        //    .then(data => {
        //        const myli = data.map(city => `<li>${city}</li>`)
        //        document.querySelector('#myli').innerHTML = myli.join("");
        //    })

        //fetch('@Url.Content("/api/GetImageByte/2")')
        //    .then(response => response.blob())
        //    .then(data => {
        //        img1.src = URL.createObjectURL(data)
        //    })

        async function loadJSON(){

            const response = await fetch('@Url.Content("/api/Cities")')
            const datas = await response.json()
            const myli = datas.map(city => `<li>${city}</li>`)
            document.querySelector('#myli').innerHTML = myli.join("");
        
        }



        async function loadImage() {
            const response = await fetch('@Url.Content("/api/GetImageByte/2")')
            const datas = await response.blob()
            img1.src = URL.createObjectURL(datas)}
        loadImage()
        loadJSON()
</script>





}